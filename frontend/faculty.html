<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Faculty Dashboard — Timelytics</title>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* ---------------- Theme / variables ---------------- */
    :root{
      --magenta: #FF00FF;
      --violet:  #8B00FF;
      --neon:    #00BFFF;
      --bg-deep: #06020b;
      --glass: rgba(255,255,255,0.03);
      --muted: rgba(230,238,243,0.72);
    }
    html,body{height:100%;font-family:'Unbounded',system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:linear-gradient(180deg,#03010a 0%, #060218 60%);color:#eef2ff;-webkit-font-smoothing:antialiased}

    /* ---------- animated floating gradient background ---------- */
    .bg-anim {
      position:fixed; inset:0; z-index:-40; pointer-events:none;
      background: radial-gradient(600px 300px at 10% 10%, rgba(138,0,255,0.08), transparent 10%),
                  radial-gradient(600px 300px at 90% 90%, rgba(0,191,255,0.06), transparent 8%);
      overflow:hidden;
    }
    .bg-anim::before, .bg-anim::after{
      content:""; position:absolute; width:140%; height:140%; left:-20%; top:-20%; filter:blur(90px);
      background: linear-gradient(120deg, rgba(255,0,255,0.12), rgba(138,0,255,0.10) 45%, rgba(0,191,255,0.08) 100%);
      mix-blend-mode: screen; animation: drift 20s linear infinite;
    }
    .bg-anim::after{ animation-direction:reverse; top:auto; bottom:-20%; left:auto; right:-20%; animation-duration:26s; }
    @keyframes drift{ 0%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-6%) rotate(6deg)} 100%{transform:translateY(0) rotate(0)} }

    /* ---------- glass / card styles ---------- */
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
      border-radius: 12px;
    }
    .neon-edge {
      position:relative;
    }
    .neon-edge::after{
      content:""; position:absolute; inset:-1px; border-radius:14px;
      background: linear-gradient(90deg,var(--neon),var(--violet),var(--magenta));
      filter: blur(14px); opacity:0.12; z-index:-1;
      pointer-events:none;
    }
    .hover-tilt{ transition: transform .22s cubic-bezier(.2,.9,.2,1), box-shadow .22s ease; }
    .hover-tilt:hover{ transform: translateY(-6px) scale(1.02); box-shadow: 0 18px 50px rgba(0,0,0,0.55); }

    /* ---------- Navbar sausage (thinner) ---------- */
    header.topbar {
      position: fixed;
      top: 10px;
      left: 0;
      right: 0;
      z-index: 60;
      display: flex;
      justify-content: center;
      padding: 0 1rem;
    }
    .sausage {
      width: min(1200px, calc(100% - 2rem));
      display: flex;
      align-items: center;
      justify-content: space-between; /* brand left, controls right */
      gap: 1rem;
      padding: .42rem .8rem;
      border-radius: 9999px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 30px rgba(2,6,23,0.45);
    }
    .brand { font-weight:800; font-size:1.05rem; background: linear-gradient(90deg,var(--neon),var(--violet),var(--magenta)); -webkit-background-clip:text; color:transparent; text-decoration:none; }

    /* Right-side controls: timer, notifications, logout */
    .right-actions { display:flex; gap:0.75rem; align-items:center; }
    .timer-pill {
      background: rgba(255,255,255,0.06);
      color: #fff;
      padding: .45rem .7rem;
      border-radius: 10px;
      font-weight:700;
      min-width:88px;
      text-align:center;
    }
    .notif-btn {
      position: relative;
      background: transparent;
      color: #fff;
      padding: .45rem .6rem;
      border-radius: 10px;
      font-size:18px;
      border: none;
      cursor: pointer;
    }
    .notif-badge {
      position:absolute; right:4px; top:4px;
      background:#FF3B3B; color:#fff; font-size:11px; padding:2px 6px; border-radius:999px; font-weight:800;
    }
    .btn-logout {
      background: rgba(255,255,255,0.06);
      color: #fff;
      padding: .48rem .9rem;
      border-radius: 10px;
      font-weight:800;
      border: 1px solid rgba(255,255,255,0.08);
      cursor:pointer;
    }

    /* hide removed items if present */
    .nav-search, .nav-week, .nav-guest, .nav-signin, .search-box, .week-label { display:none !important; }

    /* ---------- Layout ---------- */
    main.container{ padding-top:88px; max-width:1200px; margin:0 auto; padding-left:1rem; padding-right:1rem; }

    .layout{ display:grid; grid-template-columns: 320px 1fr 340px; gap:1rem; align-items:start; }
    @media (max-width:1100px){ .layout{ grid-template-columns: 280px 1fr; } .right-col{ display:none; } }
    @media (max-width:720px){ .layout{ grid-template-columns: 1fr; } .left-col{ order:2 } .main-col{ order:1 } }

    /* ---------- Hero / quick stats ---------- */
    .hero-card{ padding:1.25rem; display:flex; gap:1rem; align-items:center; justify-content:space-between; }
    .stats-row{ display:flex; gap:1rem; margin-top:1rem; flex-wrap:wrap; }
    .stat { padding:1rem; min-width:150px; flex:1; border-radius:10px; display:flex; gap:.75rem; align-items:center; }
    .stat .value{ font-weight:800; font-size:1.25rem; }
    .stat .label{ color:var(--muted); font-size:.85rem; }

    /* small chart placeholder */
    .mini-chart{ width:56px; height:34px; border-radius:6px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03)); display:flex; align-items:center; justify-content:center; color:rgba(255,255,255,0.75); font-weight:700; }

    /* urgent alerts */
    .alerts{ margin-top:1rem; display:flex; gap:.75rem; flex-direction:column; }

    /* ---------- Timetable grid ---------- */
    .timetable {
      margin-top:1rem; padding:1rem; border-radius:12px; min-height:420px; overflow:auto;
      border:1px solid rgba(255,255,255,0.03);
    }
    .tt-grid { display:grid; grid-template-columns: 80px repeat(5,1fr); gap:6px; align-items:stretch; }
    .tt-slot { background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006)); padding:.5rem; border-radius:8px; height:72px; position:relative; border:1px solid rgba(255,255,255,0.02); }
    .tt-slot .meta{ font-size:.78rem; color:var(--muted); margin-top:.35rem; }
    .slot-upcoming{ border-left:4px solid var(--neon); }
    .slot-completed{ opacity:.7; background:linear-gradient(180deg, rgba(255,255,255,0.008), rgba(255,255,255,0.006)); border-left:4px solid rgba(255,255,255,0.03); }
    .slot-cancelled{ border-left:4px solid rgba(255,40,60,0.9); opacity:0.8; }

    .occupancy { height:6px; border-radius:6px; background:rgba(255,255,255,0.03); overflow:hidden; margin-top:.5rem; }
    .occupancy > i{ display:block; height:100%; background: linear-gradient(90deg,var(--neon),var(--violet)); width:40%; }

    .slot-actions{ position:absolute; right:8px; top:8px; display:flex; gap:6px; opacity:0; transition: opacity .12s ease; }
    .tt-slot:hover .slot-actions{ opacity:1; }

    /* current time indicator (for visual) */
    .current-line{ position:absolute; height:2px; left:80px; right:0; background:linear-gradient(90deg, #ff4dff, #00d6ff); box-shadow:0 6px 18px rgba(138,0,255,0.12); z-index:10; }

    /* ---------- Sidebars ---------- */
    .side-card{ padding:1rem; margin-bottom:1rem; }
    .list-row{ display:flex; justify-content:space-between; gap:.5rem; align-items:center; padding:.45rem .5rem; border-radius:8px; }
    .next-highlight{ border-left:3px solid var(--neon); background:linear-gradient(180deg, rgba(255,255,255,0.008), rgba(255,255,255,0.006)); }

    /* analytics widgets (right) */
    .chart-box{ padding:1rem; min-height:160px; }

    /* ---------- Modals ---------- */
    .modal-backdrop{ position:fixed; inset:0; background:rgba(2,4,12,0.6); display:flex; align-items:center; justify-content:center; z-index:80; }
    .modal{ width:min(820px,95%); max-height:85vh; overflow:auto; border-radius:12px; padding:1rem; }

    /* ---------- small helpers ---------- */
    .pill{ padding:.25rem .5rem; border-radius:999px; background:rgba(255,255,255,0.03); font-weight:700; font-size:.82rem }
    .skeleton{ background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03)); border-radius:6px; height:14px; width:100%; opacity:.6; }
    [draggable="true"]{ cursor:grab; }
    .sr-only{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }
  </style>
</head>
<body>

  <!-- animated bg -->
  <div class="bg-anim" aria-hidden="true"></div>

  <!-- Top sausage navbar -->
  <header class="topbar" role="banner">
    <div class="sausage" role="navigation" aria-label="Main">
      <div class="flex items-center gap-3">
        <a href="index.html" class="brand" aria-label="Timelytics Home">Timelytics</a>
      </div>

      <div class="right-actions" aria-hidden="false">
        <div class="timer-pill" id="navTimer" title="Countdown">
          <div style="font-size:12px;opacity:0.9">Timer</div>
          <div id="countdown" style="font-size:14px;font-weight:900">45:00</div>
        </div>

        <button id="notifBtn" class="notif-btn" aria-label="Notifications" title="Notifications">🔔<span class="notif-badge" id="notifCount">3</span></button>

        <button id="logoutBtn" class="btn-logout" aria-label="Logout">Logout</button>
      </div>
    </div>
  </header>

  <!-- Main container -->
  <main class="container" role="main">
    <div class="layout">

      <!-- Left sidebar: Class management tools -->
      <aside class="left-col">
        <!-- Today's Classes -->
        <div class="side-card glass neon-edge">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-white/90 font-semibold">Today's Classes</div>
              <div class="text-xs text-white/70">Monday • 15 Apr</div>
            </div>
            <div class="pill">Next 2h</div>
          </div>
          <div class="mt-3 space-y-2" id="todaysClasses">
            <!-- JS will populate -->
            <div class="list-row next-highlight">
              <div>
                <div class="font-semibold">Calculus — Section A</div>
                <div class="text-xs text-white/60">09:00 - 10:00 • R101</div>
              </div>
              <div class="text-xs text-white/70">30m</div>
            </div>
            <div class="list-row">
              <div>
                <div class="font-semibold">Algorithms — Section B</div>
                <div class="text-xs text-white/60">10:30 - 11:30 • Lab 2</div>
              </div>
              <div class="text-xs text-white/70">1h 10m</div>
            </div>
          </div>
          <div class="mt-3 text-xs text-white/70">Time until next: <span id="timeUntilNext">00:29:12</span></div>
        </div>

        <!-- Quick Actions -->
        <div class="side-card glass neon-edge">
          <div class="text-sm font-semibold">Quick Actions</div>
          <div class="mt-3 grid gap-2">
            <button class="glass p-2 text-sm hover-tilt" id="actMark">Mark Attendance</button>
            <button class="glass p-2 text-sm hover-tilt" id="actUpload">Upload Notes</button>
            <button class="glass p-2 text-sm hover-tilt" id="actAnnounce">Adjust Class</button>
          </div>
        </div>

        <!-- Student Performance -->
        <div class="side-card glass neon-edge">
          <div class="text-sm font-semibold">Student Performance</div>
          <div class="mt-3 text-xs text-white/70">Class-wise averages</div>
          <div class="mt-3 space-y-2">
            <div class="flex items-center justify-between text-sm"><span>Calculus</span><span>78%</span></div>
            <div class="flex items-center justify-between text-sm"><span>Algorithms</span><span>84%</span></div>
            <div class="flex items-center justify-between text-sm"><span>DBMS</span><span>72%</span></div>
          </div>
          <div class="mt-3 text-xs text-white/70">Struggling: <strong>5 students</strong></div>
        </div>

        <!-- Preferences & Settings -->
        <div class="side-card glass neon-edge">
          <div class="text-sm font-semibold">Preferences & Settings</div>
          <div class="mt-2 text-xs text-white/70">Max consecutive classes: <strong id="prefMax">3</strong></div>
          <div class="mt-2 text-xs text-white/70">Preferred break: <strong id="prefBreak">12:00 - 13:00</strong></div>
          <div class="mt-3 flex gap-2">
            <button class="glass p-2 text-sm" id="btnEditPrefs">Edit</button>
            <button class="glass p-2 text-sm" id="btnLeaves">Manage Leaves</button>
          </div>
        </div>
      </aside>

      <!-- Main column -->
      <section class="main-col">
        <!-- Welcome hero -->
        <div class="hero-card glass neon-edge hover-tilt">
          <div>
            <div class="text-sm text-white/80">Welcome back,</div>
            <h2 class="text-2xl font-extrabold">Prof. Dr. Sharma 👋</h2>
            <p class="text-sm text-white/70 mt-1">Manage classes, attendance and uploads. Use quick actions or click a slot to open details.</p>

            <div class="stats-row">
              <div class="stat glass neon-edge hover-tilt">
                <div>
                  <div class="label">Classes Today</div>
                  <div class="value" id="statToday">3</div>
                </div>
                <div class="mini-chart">↗︎</div>
              </div>

              <!-- Total Students card: number removed (keeps label only) -->
              <div class="stat glass neon-edge hover-tilt">
                <div>
                  <div class="label">Total Students</div>
                  <div class="value" id="statStudents" aria-hidden="true">69</div>
                </div>
                <div class="mini-chart">Σ</div>
              </div>

              <div class="stat glass neon-edge hover-tilt">
                <div>
                  <div class="label">Classes This Semester</div>
                  <div class="value" id="statSemester">60</div>
                </div>
                <div class="mini-chart">▴</div>
              </div>

              <div class="stat glass neon-edge hover-tilt">
                <div>
                  <div class="label">Average Attendance</div>
                  <div class="value" id="statAttendance">88%</div>
                </div>
                <div class="mini-chart">%</div>
              </div>
            </div>

            <div class="alerts">
              <div class="glass p-2 flex items-center justify-between">
                <div>
                  <div class="text-sm font-semibold">Urgent Alerts</div>
                  <div class="text-xs text-white/70">2 pending approvals • 1 schedule conflict</div>
                </div>
                <button class="pill" id="btnResolve">Resolve</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Timetable -->
        <div class="timetable glass neon-edge">
          <div class="relative">
            <div id="currentLine" class="current-line" style="top:120px; display:none;"></div>
            <div class="tt-grid" aria-label="Teaching timetable grid" role="table" tabindex="0">
              <!-- Time column -->
              <div class="text-sm text-white/70">Time</div>
              <div class="text-sm font-semibold text-white/90 text-center">Monday</div>
              <div class="text-sm font-semibold text-white/90 text-center">Tuesday</div>
              <div class="text-sm font-semibold text-white/90 text-center">Wednesday</div>
              <div class="text-sm font-semibold text-white/90 text-center">Thursday</div>
              <div class="text-sm font-semibold text-white/90 text-center">Friday</div>

              <!-- rows (example timeslots 08:00-18:00 every hour) -->
              <script>
                // Generate timetable slots skeleton into DOM (runs before interactive JS)
                (function renderTimetableSkeleton(){
                  const grid = document.currentScript.parentElement;
                  const times = ['08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00'];
                  times.forEach(time=>{
                    const timeCell = document.createElement('div');
                    timeCell.className = 'text-xs text-white/70';
                    timeCell.textContent = time;
                    grid.appendChild(timeCell);
                    for(let d=0; d<5; d++){
                      const slot = document.createElement('div');
                      slot.className = 'tt-slot hover-tilt';
                      slot.setAttribute('role','button');
                      slot.setAttribute('tabindex','0');
                      slot.setAttribute('data-day', ['Monday','Tuesday','Wednesday','Thursday','Friday'][d]);
                      slot.setAttribute('data-start', time);
                      slot.innerHTML = `<div class="font-semibold text-sm">—</div><div class="meta">Free</div>`;
                      grid.appendChild(slot);
                    }
                  });
                })();
              </script>
            </div>
          </div>
        </div>
      </section>

      <!-- Right sidebar: Analytics & Insights -->
      <aside class="right-col">
        <div class="side-card glass neon-edge chart-box">
          <div class="text-sm font-semibold">Teaching Load Distribution</div>
          <div class="mt-3 text-xs text-white/70">Hours taught per day</div>
          <div class="mt-3 h-28 bg-gradient-to-tr from-white/2 to-white/1 rounded-md flex items-end gap-2 p-2">
            <!-- simple bar representation -->
            <div style="flex:1"><div style="height:60%" class="bg-gradient-to-t from-[#00bfff] to-[#6a00f4] rounded-md w-full"></div></div>
            <div style="flex:1"><div style="height:55%" class="bg-gradient-to-t from-[#00bfff] to-[#6a00f4] rounded-md w-full"></div></div>
            <div style="flex:1"><div style="height:65%" class="bg-gradient-to-t from-[#00bfff] to-[#6a00f4] rounded-md w-full"></div></div>
            <div style="flex:1"><div style="height:50%" class="bg-gradient-to-t from-[#00bfff] to-[#6a00f4] rounded-md w-full"></div></div>
            <div style="flex:1"><div style="height:45%" class="bg-gradient-to-t from-[#00bfff] to-[#6a00f4] rounded-md w-full"></div></div>
          </div>
        </div>

        <div class="side-card glass neon-edge chart-box">
          <div class="text-sm font-semibold">Classroom Utilization</div>
          <div class="mt-3 text-xs text-white/70">Avg attendance per class</div>
          <div class="mt-3">
            <div class="flex items-center justify-between text-sm"><span>R101</span><span>88%</span></div>
            <div class="h-2 bg-white/5 rounded mt-1 overflow-hidden"><i style="width:88%;display:block;height:100%;background:linear-gradient(90deg,var(--neon),var(--violet));"></i></div>
          </div>
        </div>

        <div class="side-card glass neon-edge chart-box">
          <div class="text-sm font-semibold">Student Feedback</div>
          <div class="mt-2 text-xs text-white/70">Recent ratings</div>
          <div class="mt-3 text-sm">Average: <strong>4.2 / 5</strong></div>
        </div>

        <div class="side-card glass neon-edge chart-box">
          <div class="text-sm font-semibold">Announcements Sent</div>
          <ul class="mt-3 text-sm space-y-2 text-white/80" id="annList">
            <li>Assignment 2 posted • 38 read</li>
            <li>Room change notice • 45 read</li>
          </ul>
        </div>
      </aside>
    </div>

    <!-- bottom: semester/course management & performance -->
    <section class="mt-6 grid gap-4">
      <div class="glass neon-edge p-4 hover-tilt">
        <div class="flex items-center justify-between">
          <div>
            <div class="text-sm font-semibold">My Courses</div>
            <div class="text-xs text-white/70">Courses this semester</div>
          </div>
          <div class="text-sm text-white/70">Export ⤓</div>
        </div>
        <div class="mt-3 grid md:grid-cols-3 gap-3">
          <div class="glass p-3">
            <div class="font-semibold">CS101 - Calculus</div><div class="text-xs text-white/70">3x/week</div> <!-- student count removed -->
          </div>
          <div class="glass p-3">
            <div class="font-semibold">CS201 - Algorithms</div><div class="text-xs text-white/70">2x/week</div> <!-- student count removed -->
          </div>
          <div class="glass p-3">
            <div class="font-semibold">CS305 - DBMS</div><div class="text-xs text-white/70">2x/week</div> <!-- student count removed -->
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="mt-8 text-center text-xs text-white/70 pb-8">
    <div class="max-w-6xl mx-auto px-4">
      <div style="height:2px; background:linear-gradient(90deg,var(--neon),var(--violet),var(--magenta)); border-radius:2px; margin-bottom:10px;"></div>
      © 2025 Timelytics | Built with ❤️ by TANTRIKS.
    </div>
  </footer>

  <!-- Modals (hidden by default) -->
  <div id="modalRoot" aria-hidden="true"></div>

  <!-- ---------------- JS: interactions, mock API calls, accessibility shortcuts ---------------- -->
  <script>
    // navbar behavior: hide removed elements, logout redirect, demo notif handler
    (function(){
      // Remove any leftover search/week/signin/guest nodes if present
      document.querySelectorAll('.nav-search, .nav-week, .nav-guest, .nav-signin, .search-box, .week-label').forEach(n=>n.remove());

      const logout = document.getElementById('logoutBtn');
      if(logout){
        logout.addEventListener('click', ()=>{
          try{ localStorage.removeItem('authToken'); sessionStorage.removeItem('authToken'); }catch(e){}
          window.location.replace('index.html');
        });
      }

      const nb = document.getElementById('notifBtn');
      if(nb) nb.addEventListener('click', ()=> { /* open notifications panel */ alert('Notifications (demo)'); });

      // ensure countdown element exists and is initialized
      const cdEl = document.getElementById('countdown');
      if(cdEl && !cdEl.textContent.trim()) cdEl.textContent = '45:00';
    })();
  </script>
</body>
</html>